# –ë–∞–Ω–∫–æ–≤—Å–∫–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (Yandex Study Project)

–ú–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –≤–º–µ—Å—Ç–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –±–∞–Ω–∫–æ–≤—Å–∫–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—á–µ—Ç–∞–º–∏, –¥–µ–Ω–µ–∂–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏, –æ–±–º–µ–Ω –≤–∞–ª—é—Ç, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏ —Ç.–¥. –í –ø—Ä–æ–µ–∫—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã Spring Boot, Spring Cloud, PostgreSQL, Docker Compose/Kubernetes –∏ —Ñ—Ä–æ–Ω—Ç –Ω–∞ Thymeleaf.

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é –∏ CI/CD –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø–∞–ø–∫–µ `docs/`:

- **[–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é –≤ Kubernetes](docs/DEPLOYMENT.md)** - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ Kubernetes —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Helm charts. –í–∫–ª—é—á–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ Helm charts, –º–Ω–æ–≥–æ—Å—Ä–µ–¥–æ–≤—ã—Ö —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è—Ö (dev/test/prod), –∫–æ–º–∞–Ω–¥–∞—Ö —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–µ.

- **[–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Jenkins CI/CD](docs/JENKINS_SETUP.md)** - –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ Jenkins –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Å–±–æ—Ä–∫–∏, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è. –í–∫–ª—é—á–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Jenkins, —Å–æ–∑–¥–∞–Ω–∏–µ pipeline-–∑–∞–¥–∞—á, –Ω–∞—Å—Ç—Ä–æ–π–∫—É credentials –∏ best practices.

## üöÄ –í–∞—Ä–∏–∞–Ω—Ç—ã —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:

1. **Docker Compose** (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏) - —Å–º. —Ä–∞–∑–¥–µ–ª "–ó–∞–ø—É—Å–∫" –Ω–∏–∂–µ
2. **Kubernetes + Helm** (–¥–ª—è production) - —Å–º. [DEPLOYMENT.md](docs/DEPLOYMENT.md)

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞

- `auth-server` ‚Äì OAuth2 —Å–µ—Ä–≤–µ—Ä –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏, –≤—ã–¥–∞–µ—Ç —Ç–æ–∫–µ–Ω—ã –∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏.
- `accounts-service` ‚Äì —É—á–µ—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤, –±–∞–Ω–∫–æ–≤—Å–∫–∏–µ —Å—á–µ—Ç–∞, –±–∞–ª–∞–Ω—Å—ã.
- `cash-service` ‚Äì –¥–µ–ø–æ–∑–∏—Ç—ã –∏ —Å–Ω—è—Ç–∏–µ —Å—Ä–µ–¥—Å—Ç–≤.
- `transfer-service` ‚Äì –ø–µ—Ä–µ–≤–æ–¥—ã –º–µ–∂–¥—É —Å—á–µ—Ç–∞–º–∏ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏.
- `exchange-service`, `exchange-generator-service` ‚Äì –∫—É—Ä—Å—ã –≤–∞–ª—é—Ç –∏ –∏—Ö –≥–µ–Ω–µ—Ä–∞—Ü–∏—è.
- `blocker-service` ‚Äì –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π.
- `notifications-service` ‚Äì —Ä–∞—Å—Å—ã–ª–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.
- `gateway-service` ‚Äì API gateway (Spring Cloud Gateway).
- `config-server` + `eureka-server` ‚Äì –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ —Å–µ—Ä–≤–∏—Å-–¥–∏—Å–∫–∞–≤–µ—Ä–∏.
- `front-ui` ‚Äì –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

## –ó–∞–ø—É—Å–∫

–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è: Docker –∏ Docker Compose, Java 21, Maven. –ò–∑ –∫–æ—Ä–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:
```bash
cd bankapp-common/bankapp
mvn -DskipTests package
docker compose up --build
```
–°—Ç–µ–∫ –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç. UI –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ http://localhost:8090, Gateway –Ω–∞ http://localhost:8080, Eureka ‚Äì http://localhost:8761.

## –¢–µ—Å—Ç—ã

```bash
mvn test
```
–ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –º–æ–¥—É–ª–µ–π –∏–º–µ—é—Ç unit/integration —Ç–µ—Å—Ç—ã (—Ñ—Ä–æ–Ω—Ç, transfer, auth –∏ –¥—Ä.).

## –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

–í `auth-server` –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–æ–∑–¥–∞—é—Ç—Å—è —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:
- **admin** / `password` ‚Äì –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä.
- **tester** / `password` ‚Äì —Ç–µ—Å—Ç–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å.

–£ –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—Å—Ç—å –Ω–∞–±–æ—Ä –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö —Å—á–µ—Ç–æ–≤ (—Å–æ–∑–¥–∞—é—Ç—Å—è –≤ `accounts-service` –º–∏–≥—Ä–∞—Ü–∏—è–º–∏). –î–ª—è –≤—Ö–æ–¥–∞ –≤ UI –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å –∏ –∑–∞—Ç–µ–º —Ä–∞–±–æ—Ç–∞–π—Ç–µ —Å –ª–∏—á–Ω—ã–º–∏ —Å—á–µ—Ç–∞–º–∏, –ø–µ—Ä–µ–≤–æ–¥–∞–º–∏ –∏ –ø—Ä.

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

- –°–±–æ—Ä–∫–∞ –±–µ–∑ —Ç–µ—Å—Ç–æ–≤: `mvn -DskipTests package`
- –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤: `mvn spring-boot:run -pl <module>`
- –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ docker: `docker compose logs <service>`
- –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ç–µ–∫–∞: `docker compose down`

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–ü–æ—Å–ª–µ –≤—Ö–æ–¥–∞ –≤ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:

1. –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Å—á–µ—Ç–∞ –∏ –±–∞–ª–∞–Ω—Å—ã.
2. –û—Ç–∫—Ä—ã–≤–∞—Ç—å –Ω–æ–≤—ã–µ —Å—á–µ—Ç–∞ (–¥–æ 3 –≤–∞–ª—é—Ç ‚Äì RUB, USD, CNY).
3. –í–Ω–æ—Å–∏—Ç—å —Å—Ä–µ–¥—Å—Ç–≤–∞ –∏ —Å–Ω–∏–º–∞—Ç—å –¥–µ–Ω—å–≥–∏ (cash-service).
4. –î–µ–ª–∞—Ç—å –ø–µ—Ä–µ–≤–æ–¥—ã –º–µ–∂–¥—É —Å–≤–æ–∏–º–∏ —Å—á–µ—Ç–∞–º–∏ –∏ –Ω–∞ —Å—á–µ—Ç–∞ –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (transfer-service) —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º –ø–æ–ª—É—á–∞—Ç–µ–ª—è.
5. –°–º–æ—Ç—Ä–µ—Ç—å –∫—É—Ä—Å—ã –≤–∞–ª—é—Ç (exchange-service) –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è.

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –ü—Ä–æ—Ñ–∏–ª—å `docker` –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö.
- –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –≤–Ω–µ docker –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–æ—Ñ–∏–ª—å `default` –∏ —Å–≤–æ–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `application.yml`.
- –ï—Å–ª–∏ –ø–æ—è–≤–ª—è—é—Ç—Å—è –æ—à–∏–±–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–µ—Ä–≤–∏—Å–∞–º ‚Äì —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ `healthy` (`docker compose ps`).

---

## ‚ò∏Ô∏è Kubernetes & Helm –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –≤ Kubernetes —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Helm charts.

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Helm Charts

```
helm/bank-app/
‚îú‚îÄ‚îÄ Chart.yaml                 # Umbrella chart
‚îú‚îÄ‚îÄ values.yaml               # –û–±—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
‚îú‚îÄ‚îÄ values-dev.yaml           # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è dev
‚îú‚îÄ‚îÄ values-test.yaml          # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è test
‚îú‚îÄ‚îÄ values-prod.yaml          # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è prod
‚îî‚îÄ‚îÄ charts/                   # Subcharts –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
    ‚îú‚îÄ‚îÄ postgresql/
    ‚îú‚îÄ‚îÄ auth-server/
    ‚îú‚îÄ‚îÄ accounts-service/
    ‚îú‚îÄ‚îÄ transfer-service/
    ‚îú‚îÄ‚îÄ cash-service/
    ‚îú‚îÄ‚îÄ exchange-service/
    ‚îú‚îÄ‚îÄ exchange-generator-service/
    ‚îú‚îÄ‚îÄ notifications-service/
    ‚îú‚îÄ‚îÄ blocker-service/
    ‚îú‚îÄ‚îÄ gateway-service/
    ‚îî‚îÄ‚îÄ front-ui/
```

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –≤ Kubernetes

```bash
# –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤ dev namespace
helm install bank-app ./helm/bank-app \
  -f ./helm/bank-app/values-dev.yaml \
  --namespace bank-app-dev \
  --create-namespace

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
kubectl get pods -n bank-app-dev

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
helm upgrade bank-app ./helm/bank-app \
  -f ./helm/bank-app/values-dev.yaml \
  --namespace bank-app-dev
```

–ü–æ–¥—Ä–æ–±–Ω–µ–µ —Å–º. [DEPLOYMENT.md](docs/DEPLOYMENT.md)

---

## üîÑ CI/CD —Å Jenkins

–î–ª—è –∫–∞–∂–¥–æ–≥–æ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞ —Å–æ–∑–¥–∞–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π Jenkinsfile —Å –ø–æ–ª–Ω—ã–º CI/CD pipeline:

### Pipeline —ç—Ç–∞–ø—ã:

1. **Checkout** - –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
2. **Validate** - –ü—Ä–æ–≤–µ—Ä–∫–∞ Helm charts (lint)
3. **Build** - –°–±–æ—Ä–∫–∞ Maven –ø—Ä–æ–µ–∫—Ç–∞
4. **Test** - –ó–∞–ø—É—Å–∫ unit —Ç–µ—Å—Ç–æ–≤
5. **Docker Build** - –°–æ–∑–¥–∞–Ω–∏–µ Docker –æ–±—Ä–∞–∑–∞
6. **Docker Push** - –ó–∞–≥—Ä—É–∑–∫–∞ –≤ registry
7. **Deploy to Dev** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤ dev
8. **Integration Tests** - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ dev
9. **Deploy to Test** - –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤ test (—Ç–æ–ª—å–∫–æ master)
10. **Deploy to Prod** - –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤ production (—Å –æ–¥–æ–±—Ä–µ–Ω–∏–µ–º)

### –î–æ—Å—Ç—É–ø–Ω—ã–µ Jenkinsfiles:

- `Jenkinsfile` - Umbrella pipeline (–≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã —Å—Ä–∞–∑—É)
- `*/Jenkinsfile` - –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ pipeline –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞

–ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ Jenkins: [JENKINS_SETUP.md](docs/JENKINS_SETUP.md)

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫:**
- **Framework**: Spring Boot 3.5.6, Spring Cloud 2025.0.0
- **Java**: 21
- **Container Orchestration**: Kubernetes
- **Package Manager**: Helm 3.x
- **CI/CD**: Jenkins
- **Service Discovery**: Spring Cloud Kubernetes (–≤ K8s) / Eureka (–≤ Docker)
- **API Gateway**: Spring Cloud Gateway
- **Security**: Spring Authorization Server, OAuth2, JWT
- **Database**: PostgreSQL 14
- **Caching**: Redis (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
- `bank-app-dev` - Development
- `bank-app-test` - Testing
- `bank-app-prod` - Production
